{"hash":"1acd9ff7544f5ebc679a6336555ee451878b9c4a","data":{"post":{"title":"Generating a midi music stream with Python","description":"using python package Mido to send midi information to midi player - an introduction","path":"/blog/2020-03-23-generating-midi-music-stream-with-python/","content":"<p><em>instructions originally sourced from <a href=\"https://www.reddit.com/r/ableton/comments/5tuihk/any_good_resources_on_python_to_ableton/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">this fine reddit post</a></em></p>\n<h3 id=\"getting-started\"><a href=\"#getting-started\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Getting Started</h3>\n<p>Today, we will be installing <code>Mido</code>, a python midi package. We'll then open a new audio port (will show the ios instructions), and output our midi stream to that port. I'm using Ableton Live 10 Intro as my program to consume the midi stream, but any application that takes in external midi will do.</p>\n<p>first off, if you don't have python install on your machine, you can get it <a href=\"https://www.python.org/downloads/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">here</a>.\\\nThen, install <code>mido</code> via <code>pip install mido</code>. Full <code>mido</code> documentation <a href=\"https://mido.readthedocs.io/en/latest/index.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">here</a>.</p>\n<hr>\n<h3 id=\"design\"><a href=\"#design\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Design</h3>\n<p>The final workflow will be as follows - </p>\n<ol>\n<li>Our midi player will be listening to our newly created midi port. </li>\n<li>Our python script will attach itself to our newly created midi port and send midi information to it. </li>\n<li>Our midi player will play the midi sent from our file. </li>\n</ol>\n<p>The first thing we must do is create our midi port. </p>\n<hr>\n<h3 id=\"creating-a-new-midi-port\"><a href=\"#creating-a-new-midi-port\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Creating a new midi port</h3>\n<p><em>we will be going over the steps for mac. <a href=\"https://docs.microsoft.com/en-us/windows-hardware/drivers/audio/midi-port-driver\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Here</a> are the official docs for windows.</em></p>\n<ol>\n<li>On Mac OS, navigate to <code>Midi Audio Setup</code>. </li>\n<li>double click on IAC Driver</li>\n<li>On the window that pops up, click \"ports\". </li>\n<li>There will probably already be a port named \"Bus 1\". Create a new port, or rename the current one. I named mine \"pioneer.\"</li>\n</ol>\n<p><img src=\"/uploads/1pythonmidi_iacdriverports.png\" alt=\"IAC Driver ports\" title=\"IAC Driver ports\"></p>\n<hr>\n<h3 id=\"point-your-midi-player-to-your-new-port\"><a href=\"#point-your-midi-player-to-your-new-port\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Point your midi player to your new port</h3>\n<p>This next step is different based on which midi player you use. The following screenshot is from Ableton Live 10 Intro.    </p>\n<p><img src=\"/uploads/1pythonmidi_abletonmidiport.png\" alt=\"Ableton - point your midi track at your IAC driver port\" title=\"Ableton - point your midi track at your IAC driver port\"></p>\n<hr>\n<h3 id=\"write-your-python-code\"><a href=\"#write-your-python-code\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Write your python code</h3>\n<p>Below is some sample code that will play send your midi player a middle C, which is represented with the integer 60. Musical notes are represented with the values 1 through 127. When you run the following code, it will play once. </p>\n<pre><code class=\"language-python\">import mido\n\nmiddleC = 60\nmsg = mido.Message('note_on', note=middleC, velocity=64)\noutport = mido.open_output('IAC Driver pioneer')\noutport.send(msg)\n</code></pre>\n<iframe width=\"80%\" height=\"`00\" src=\"https://clyp.it/wpdhjpc4/widget\" frameborder=\"0\"></iframe>\n<p>To demonstrate what I mean, I modified the above code to play continuously, pausing for .5 seconds every after every play. </p>\n<pre><code>import mido\nfrom time import sleep\n\nmiddleC = 60\nwhile True:\n    msg = mido.Message('note_on', note=middleC, velocity=64)\n    outport = mido.open_output('IAC Driver pioneer')\n    outport.send(msg)\n    sleep(.5)\n</code></pre>\n<p><img src=\"/uploads/1pythonmidi_repeatingnote.gif\" alt=\"midi note looping\" title=\"midi note looping\"></p>\n<hr>\n<h3 id=\"in-conclusion\"><a href=\"#in-conclusion\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>In conclusion</h3>\n<p>You can now send midi messages to your midi player from Python as it if were a midi controller! </p>\n<p>We'll build cooler stuff with this in blogposts to come. </p>\n<p>See you next time!</p>\n","date":"2020-03-21T06:37:03.014Z"}},"context":{}}